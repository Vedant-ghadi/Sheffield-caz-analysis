# ğŸ“‰ Quantifying Policy Impact: Sheffield Clean Air Zone Analysis

[![R](https://img.shields.io/badge/R-4.5.2-276DC3.svg?logo=r&logoColor=white)](https://www.r-project.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![Status](https://img.shields.io/badge/Status-Complete-success.svg)]()

> **A rigorous time series analysis evaluating the causal effectiveness of Sheffield's 2023 Clean Air Zone (CAZ) intervention on Nitrogen Dioxide (NOâ‚‚) concentrations.**

---

## ğŸ“Š Executive Summary

This study employs **counterfactual inference** and **interrupted time series (ITS) regression** to quantify the impact of the Sheffield Clean Air Zone implemented on February 27, 2023. By analyzing **35,064 hourly observations** (Jan 2022 â€“ Dec 2025) and controlling for seasonality and exogenous factors, this analysis demonstrates a statistically significant reduction in traffic-related pollution.

### ğŸ† Key Findings

*   **CAZ Effectiveness (Section 3.1.4):** Sheffield CAZ achieved a reduction in NOâ‚‚ of **2.35 Î¼g/mÂ³** in the concentration itself (p = 0.002) and reduced the rate of pollution accumulation by **0.014 Î¼g/mÂ³/day** (p < 0.001).
*   **Weather-Robust (Section 3.1.3):** Results after weather normalization indicate a **41.0%** causal policy effect, confirming that the reduction was driven by emissions changes rather than meteorological favorability.
*   **Multi-Model Consistency (Section 3.2.1):** Five independent models (ARIMA, Prophet, XGBoost, ITS, LSTM) demonstrate strong NOâ‚‚ decreases, which enhances causal inferences through triangulation.
*   **XGBoost Lead (Section 3.1.3):** Gradient boosting with engineered features achieves the best predictive results (**RMSE 4.03**), significantly outperforming univariate ARIMA (**RMSE 8.38**).
*   **Health Translation (Section 3.2.3):** The **9.1 Î¼g/mÂ³** change in the mean concentration of NOâ‚‚ is associated with a **3.6% reduction** in pollution-attributable mortality risk for the local population.

![Executive Summary](visualizations/composites/05_executive_summary.png)

---

## ğŸ”¬ Technical Methodology

To ensure robustness, this analysis utilizes a multi-model approach to isolate the policy effect from natural variation.

### 1. Baseline Forecasting (ARIMA & Prophet)
Constructed a "business as usual" counterfactual based on pre-intervention dynamics. The **Prophet** model captured complex multi-seasonal patterns (yearly, weekly), revealing that traditional ARIMA methods may underestimate the effect size when strong seasonalities are present.

### 2. Machine Learning Weather Normalisation (XGBoost)
Used Gradient Boosting to model non-linear relationships between weather (wind, temperature) and pollution. This proved that the reduction was driven by emissions changes, not favorable weather conditions.

### 3. Interrupted Time Series (ITS) Regression
Formal statistical test for causal structural breaks.
*   **Level Change:** Immediate drop ($\beta_2 = -2.35$, $p<0.01$).
*   **Trend Change:** Accelerated rate of improvement ($\beta_3 = -0.014$, $p<0.001$).

---

## ğŸš€ How to Run the Analysis

This repository contains a fully reproducible R pipeline. Follow these steps to replicate the study:

### Prerequisites
*   **Language**: R (v4.5.2+)
*   **Key Libraries**: `forecast`, `prophet`, `xgboost`, `keras3`, `tidyverse`, `zoo`, `lmtest`

### Execution Guide
Run the scripts in the `scripts/` folder in numerical order:

```bash
git clone https://github.com/Vedant-ghadi/Sheffield-caz-analysis.git
```

1.  **Data Extraction (Scripts 01-02):**
    *   `01_extract_air_quality.R`: Fetches hourly pollution data from Open-Meteo API.
    *   `02_extract_weather_merge.R`: Retreives historical weather data and merges datasets.

2.  **Analysis & Modelling (Scripts 03-08):**
    *   `03_eda_weather_pollution.R`: Generates initial exploratory plots.
    *   `04_model_arima_baseline.R` & `05_model_prophet.R`: Trains baseline forecasting models.
    *   `06_model_xgboost.R`: Performs weather normalisation.
    *   `07_model_its.R`: Runs the Causal Impact regression.
    *   `08_model_lstm.R`: (Experimental) Deep learning forecast.

3.  **Reporting (Scripts 09-10):**
    *   `09_viz_composites.R`: Generates the final composite figures for the report.
    *   `10_viz_gallery.R`: Creates supplementary diagnostic plots.

---

## ğŸ“‰ Visualization Gallery

### The Structural Break
The dashboard below visualizes the raw time series against the intervention timeline. Note the clear shift in the data distribution post-February 2023.

![CAZ Impact Dashboard](visualizations/composites/01_caz_impact_dashboard.png)

### Forecast vs. Actuals
The divergence between the **counterfactual forecast (dotted)** and **observed data (solid)** represents the "clean air dividend" generated by the policy.

![Model Comparison](visualizations/composites/02_model_forecast_comparison.png)

---

## ğŸ‘¤ Author

**Vedant Ghadigaonkar**  
*Data Scientist | Time Series Analysis | Policy Evaluation*

*   **GitHub**: [@Vedant-ghadi](https://github.com/Vedant-ghadi)
*   **LinkedIn**: [Vedant Ghadigaonkar](https://www.linkedin.com/in/vedant-ghadigaonkar-2bb022231/)

---

*Data provided by the Copernicus Atmosphere Monitoring Service (CAMS) via Open-Meteo API.*
